<!DOCTYPE html>
<html>
	
	<head>
	<title>Architect Page</title>
	
	
	    <meta charset="utf-8" />

    <?php
       ini_set('display_errors', 1);
       error_reporting(E_ALL);
    ?>
	
	    <link href=
        "http://nrs-projects.humboldt.edu/~st10/styles/normalize.css"
        type="text/css" rel="stylesheet" />
		
		<link href="assignment2_css_file.css" 
		rel="stylesheet" type="text/css" >

    <link href="try-oracle.css" type="text/css"   
          rel="stylesheet" />
	
	</head>
	
	<body>
		<h1><center>Architect's/Sellers' Page</center></h1>
	<a href = "http://nrs-projects.humboldt.edu/~sjb747/Assignment2/assignment2_Buyer's_page.html">Buyer's Page</a>
	
	<?php
    if ( ! array_key_exists("lname", strip_tags($_POST) )
    {
        ?>
	
	
	<center>
	<form method="post" 
          action="<?= htmlentities($_SERVER['PHP_SELF'], 
		  ENT_QUOTES) ?>">
	
	<fieldset  style="padding:20px; width:400px; border-width : 5px; background-color:  darkblue; border-color : white">
		  <legend>Personal Information</legend>
		   <label>First Name</label>
 		    <input id = "fname" type = "text" size = "30" maxlength = "20"><br/><br/>
		  	
			<label>Last Name</label>
			<input id = "lname" type = "text" size = "30" maxlength = "20"><br/><br/>
			
			<label>Email</label>
			<input id = "email" type = "text" size = "30" maxlength = "20"><br/><br/>
			
			<legend>Any Additional Personal Information</legend>
			<textarea id = "pi" rows="6" cols="45" placeholder="Enter anything else relevent here!"></textarea>

			<h2 style="color : white">Building Specs</h2>
			
			<label>Building height(in stories)</label>
			<input id = "height" type = "number" size = "10" maxlength = "5"><br/><br/>
			
			<label>Number of Rooms</label>	
			<input id = "numrms" type = "number" size = "15" maxlength = "5"><br/><br/> 			
			
			<label>Possible Price Range</label>
				<select id="parish">
					<option value="default">--------</option>
					<option value="10-99">10,000 - 99,000</option>
					<option value="100-249">100,000 - 249,000</option>
					<option value="250-499">250,000 - 499,000</option>
					<option value="500+">500,000+</option>
				</select><br/><br/>
		
			<label>Building's Name</label>
			<input id ="bname" type = "text" size = "25" maxlength="20"><br/><br/> 
			
				<div class="submit">
					<input type="submit"/>
					<input type="reset"/
				</div>
			</fieldset>
			</form>
			</center>
		<?php
		}  
		
		else
		{
		
			//first i must take in all the information passed to us by the form

			
			$db_conn_str = "(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)
							(HOST = cedar.humboldt.edu)
							(PORT = 1521))
							(CONNECT_DATA = (SID = STUDENT)))";
							
		$connection = oci_connect('sjb747','SPo98765',$db_conn_str);
			
			if(	! $connection)
			{
				?>
				
				<p>Couldn't log in</p>
				
				<?php
				exit;
			}
		
			
			$new_build_call = 'begin new_build( :new_fname,  :new_lname, 
												:new_email,	 :new_pi, 
												:new_height, :new_numrms, 
												:new_parish, :new_bname); end;';
			new_build_stmt = oci_parse($conn,$new_build_call);
			
			$fname = strip_tags($_POST["fname"]);
			$lname = strip_tags($_POST["lname"]);
			$email = strip_tags($_POST["email"]);
			$notes = strip_tags($_POST["pi"]);
			$stories = strip_tags($_POST["height"]);
			$rooms = strip_tags($_POST["numrms"]);
			$price = strip_tags($_POST["parish"]);
			$bname = strip_tags($_POST["bname"]);
			
			oci_bind_by_name(new_build_stmt,":new_fname",$fname);
			oci_bind_by_name(new_build_stmt,":new_lname",$lname);
			oci_bind_by_name(new_build_stmt,":new_email",$email);
			oci_bind_by_name(new_build_stmt,":new_pi",$notes);
			oci_bind_by_name(new_build_stmt,":new_height",$height);
			oci_bind_by_name(new_build_stmt,":new_numrms",$rooms);
			oci_bind_by_name(new_build_stmt,":new_parish",$price);
			oci_bind_by_name(new_build_stmt,":new_bname",$bname);
			
			oci_execute($new_build_stmt, OCI_DEFAULT);
			oci_commit($connection);
			oci_close($connection);
			
			
			
			
			
			
			
			
			
			
			
			
		}
?>


	</body>
</html>